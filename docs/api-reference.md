# ðŸ“š API Reference

> **Note:** This file is auto-generated by `docs/generate_api_reference.py`.

## Core Data Models

### Signal

| Field | Type | Description | Default |
|-------|------|-------------|---------|
| `id` | `integer?` |  | None |
| `timestamp` | `string` |  | None |
| `symbol` | `string` |  | **Required** |
| `decision` | `string` |  | **Required** |
| `confidence` | `number` |  | **Required** |
| `reasoning` | `string` |  | **Required** |
| `recommended_option` | `string?` |  | None |
| `stop_loss` | `number?` |  | None |
| `take_profit` | `number?` |  | None |


### Trade

| Field | Type | Description | Default |
|-------|------|-------------|---------|
| `id` | `integer?` |  | None |
| `timestamp` | `string` |  | None |
| `symbol` | `string` |  | **Required** |
| `action` | `string` |  | **Required** |
| `quantity` | `number` |  | **Required** |
| `price` | `number` |  | **Required** |
| `status` | `string` |  | **Required** |
| `order_id` | `string?` |  | None |
| `region` | `string` |  | US |
| `strategy` | `string` |  | AI_Momentum |
| `pnl` | `number?` |  | 0.0 |


### RiskReview (Devil's Advocate)

Stores devil's advocate (AI risk reviewer) decisions.

| Field | Type | Description | Default |
|-------|------|-------------|---------|
| `id` | `integer?` |  | None |
| `timestamp` | `string` |  | None |
| `symbol` | `string` |  | **Required** |
| `original_decision` | `string` |  | **Required** |
| `original_confidence` | `number` |  | **Required** |
| `review_decision` | `string` |  | **Required** |
| `review_reasoning` | `string` |  | **Required** |
| `was_overridden` | `boolean` |  | False |


### MarketTrend

| Field | Type | Description | Default |
|-------|------|-------------|---------|
| `id` | `integer?` |  | None |
| `timestamp` | `string` |  | None |
| `tickers` | `string` |  | **Required** |
| `source` | `string` |  | news_scan |


### APICallLog

Tracks every external API call for cost, latency, and usage analysis.

| Field | Type | Description | Default |
|-------|------|-------------|---------|
| `id` | `integer?` |  | None |
| `timestamp` | `string` |  | None |
| `source` | `string` |  | **Required** |
| `provider` | `string` |  | **Required** |
| `endpoint` | `string?` |  | None |
| `symbol` | `string?` |  | None |
| `region` | `string?` |  | None |
| `latency_ms` | `integer` |  | 0 |
| `http_status` | `integer?` |  | None |
| `success` | `boolean` |  | True |
| `error_message` | `string?` |  | None |
| `prompt_tokens` | `integer?` |  | None |
| `completion_tokens` | `integer?` |  | None |
| `total_tokens` | `integer?` |  | None |
| `estimated_cost_usd` | `number?` |  | None |


### AgentEvent

Stores notable agent lifecycle events (cycle starts, errors, circuit breakers).

| Field | Type | Description | Default |
|-------|------|-------------|---------|
| `id` | `integer?` |  | None |
| `timestamp` | `string` |  | None |
| `event_type` | `string` |  | **Required** |
| `symbol` | `string?` |  | None |
| `region` | `string?` |  | None |
| `details` | `string?` |  | None |


## Auxiliary Models

### TechIndicators

| Field | Type | Description | Default |
|-------|------|-------------|---------|
| `rsi` | `number` |  | **Required** |
| `macd` | `number` |  | **Required** |
| `macd_signal` | `number` |  | **Required** |
| `bb_upper` | `number` |  | **Required** |
| `bb_lower` | `number` |  | **Required** |
| `atr` | `number` |  | **Required** |
| `sma_50` | `number?` |  | None |
| `sma_200` | `number?` |  | None |
| `volume` | `integer?` |  | None |
| `avg_volume` | `integer?` |  | None |
| `volume_oscillator` | `number?` |  | None |


### StockRelation

A related stock with the nature of its relationship.

| Field | Type | Description | Default |
|-------|------|-------------|---------|
| `symbol` | `string` |  | **Required** |
| `relationship` | `string` |  | **Required** |
| `impact_weight` | `number` |  | 0.5 |


### CrossImpact

Cross-impact context for a target stock, built from its correlated peers.

| Field | Type | Description | Default |
|-------|------|-------------|---------|
| `target_symbol` | `string` |  | **Required** |
| `related_earnings` | `array` |  | [] |
| `related_moves` | `array` |  | [] |
| `related_news_context` | `string` |  |  |
| `political_context` | `string` |  |  |


## Configuration

### AgentSettings (.env)

| Field | Type | Description | Default |
|-------|------|-------------|---------|
| `rh_username` | `string?` |  | None |
| `rh_password` | `string?` |  | None |
| `rh_mfa_code` | `string?` |  | None |
| `kite_api_key` | `string?` |  | None |
| `kite_access_token` | `string?` |  | None |
| `icici_api_key` | `string?` |  | None |
| `icici_secret_key` | `string?` |  | None |
| `icici_session_token` | `string?` |  | None |
| `us_preferred_broker` | `string` |  | robinhood |
| `india_preferred_broker` | `string` |  | zerodha |
| `india_fallback_broker` | `string?` |  | icici |
| `us_max_capital` | `number` |  | 500.0 |
| `us_max_per_trade` | `number?` |  | None |
| `india_max_capital` | `number` |  | 500.0 |
| `india_max_per_trade` | `number?` |  | None |
| `ai_provider` | `string` |  | azure_openai |
| `openai_api_key` | `string?` |  | None |
| `AZURE_OPENAI_ENDPOINT` | `string?` |  | None |
| `AZURE_OPENAI_API_VERSION` | `string` |  | 2023-05-15 |
| `AZURE_OPENAI_DEPLOYMENT_NAME` | `string?` |  | None |
| `AZURE_OPENAI_API_KEY` | `string?` |  | None |
| `gemini_api_key` | `string?` |  | None |
| `db_dir` | `string` |  | __databases__ |
| `trading_db_name` | `string` |  | trading_agent.db |
| `activity_db_prefix` | `string` |  | activity_ |
| `trading_mode` | `string` |  | paper |
| `max_capital` | `number` |  | 1000.0 |
| `max_risk_per_trade` | `number` |  | 0.02 |
| `us_watchlist` | `string` |  | AAPL,TSLA,SPY,QQQ,MSFT |
| `india_watchlist` | `string` |  | RELIANCE.NS,TCS.NS,INFY.NS,HDFCBANK.NS,TATASTEEL.NS |
| `watchlist` | `array` |  | [{'ticker': 'AAPL', 'enabled': True, 'asset_type': 'stock'}, {'ticker': 'TSLA', 'enabled': True, 'asset_type': 'stock'}, {'ticker': 'SPY', 'enabled': True, 'asset_type': 'stock'}] |

